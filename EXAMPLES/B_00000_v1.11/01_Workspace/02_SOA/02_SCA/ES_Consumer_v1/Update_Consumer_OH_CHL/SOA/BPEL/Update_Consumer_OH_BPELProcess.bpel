<?xml version = "1.0" encoding = "UTF-8" ?>
<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer 
  
  Created: Tue Feb 23 17:08:40 ART 2016
  Author:  pablo.lucero
  Type: BPEL 2.0 Process
  Purpose: Synchronous BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
<process name="Update_Consumer_OH_BPELProcess"
               targetNamespace="http://xmlns.oracle.com/ES_Consumer_v1/Update_Consumer_OH/Update_Consumer_OH_BPELProcess"
               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
               xmlns:client="http://xmlns.oracle.com/ES_Consumer_v1/Update_Consumer_OH/Update_Consumer_OH_BPELProcess"
               xmlns:ora="http://schemas.oracle.com/xpath/extension"
               xmlns:ui="http://xmlns.oracle.com/soa/designer"
               xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns1="http://oracle.com/sca/soapservice/ES_Consumer_v1/Update_Consumer_OH/DService"
         xmlns:ns2="http://xmlns.oracle.com/pcbpel/adapter/jms/ES_Consumer_v1/Update_Consumer_OH/jmsReference_Upd_RA_SALESFORCE"
         xmlns:ns3="http://xmlns.oracle.com/ES_Consumer_v1/Update_Consumer_OH/Update_Consumer_OH_BPELProcess/correlationset"
         xmlns:ns4="http://www.entel.cl/ESO/MessageHeader/v1" xmlns:ns5="http://www.entel.cl/EBO/Consumer/v1"
         xmlns:ns6="http://www.entel.cl/EBM/Consumer/upd/v1" xmlns:ns7="http://www.entel.cl/ESO/Result/v2"
         xmlns:ns8="http://www.entel.cl/ESO/Error/v1"
         xmlns:ns9="http://www.entel.cl/CSM/RA/CHL/SALESFORCE/CRM/UPD-CLI-DATA/v1"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
         xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
         xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
         xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
         xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
         xmlns:ess="http://xmlns.oracle.com/scheduler" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
         xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
         xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
         xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap"
         xmlns:ns10="http://www.entel.cl/SC/ErrorManager/v1" xmlns:ns11="http://www.entel.cl/SC/ConversationManager/v1"
         xmlns:ns12="http://www.entel.cl/SC/ErrorManager/handle/v1"
         xmlns:ns13="http://www.entel.cl/SC/ConversationManager/publishResult/v1"
         xmlns:ns14="http://www.entel.cl/ESO/Tracer/v1"
         xmlns:ns16="http://www.entel.cl/SC/ConversationManager/Aux/ConversationStatus"
         xmlns:ns15="http://www.entel.cl/SC/ConversationManager/updStatus/v1" xml:id="id_1">
  <bpelx:annotation xml:id="id_2">
    <bpelx:analysis xml:id="id_3">
      <bpelx:property name="propertiesFile" xml:id="id_4">
        <![CDATA[../WSDLs/Update_Consumer_OH_BPELProcess_properties.wsdl]]>
      </bpelx:property>
    </bpelx:analysis>
  </bpelx:annotation>
  <import namespace="http://www.entel.cl/ESO/Result/v2" location="oramds:/apps/Commons/SR_Commons/XSD/ESO/Result_v2_ESO.xsd"
          importType="http://www.w3.org/2001/XMLSchema" xml:id="id_5"/>
  <import namespace="http://www.entel.cl/EBM/Consumer/upd/v1" location="oramds:/apps/Commons/ES_Consumer_v1/ESC/Primary/upd_Consumer_v1_EBM.xsd"
          importType="http://www.w3.org/2001/XMLSchema" xml:id="id_6"/>
  <import namespace="http://www.entel.cl/ESO/MessageHeader/v1" location="oramds:/apps/Commons/SR_Commons/XSD/ESO/MessageHeader_v1_ESO.xsd"
          importType="http://www.w3.org/2001/XMLSchema" xml:id="id_7"/>
  <import namespace="http://schemas.oracle.com/bpel/extension" location="../WSDLs/RuntimeFault.wsdl"
          importType="http://schemas.xmlsoap.org/wsdl/" xml:id="id_8"/>
  <import ui:processWSDL="true" namespace="http://xmlns.oracle.com/ES_Consumer_v1/Update_Consumer_OH/Update_Consumer_OH_BPELProcess" location="../WSDLs/Update_Consumer_OH_BPELProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"
          xml:id="id_9"/>
    <!-- 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        PARTNERLINKS                                                      
        List of services participating in this BPEL process               
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    --> 
  <partnerLinks xml:id="id_10">
    <!-- 
      The 'client' role represents the requester of this service. It is 
      used for callback. The location and correlation information associated
      with the client role are automatically set using WS-Addressing.
    -->
    <partnerLink name="update_consumer_oh_bpelprocess_client" partnerLinkType="client:Update_Consumer_OH_BPELProcess" myRole="Update_Consumer_OH_BPELProcessProvider"
                 xml:id="id_11"/>
    <partnerLink name="jmsReference_Upd_RA_SALESFORCE" partnerLinkType="ns2:jmsReference_Upd_RA_SALESFORCE_plt"
                 partnerRole="Request_role" myRole="Reply_role" xml:id="id_12"/>
    <partnerLink name="DReference_ErrorManager" partnerLinkType="ns10:DReference_ErrorManager"
                 partnerRole="ErrorManager_PortType" xml:id="id_13"/>
    <partnerLink name="DReference_SBConversationManager" partnerLinkType="ns11:DReference_SBConversationManager"
                 partnerRole="ConversationManager_PortType" xml:id="id_14"/>
    <partnerLink name="DService" partnerLinkType="client:Update_Consumer_OH_BPELProcess"
                 myRole="Update_Consumer_OH_BPELProcessProvider" xml:id="id_15"/>
  </partnerLinks>

  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      VARIABLES                                                        
      List of messages and XML documents used within this BPEL process 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <variables xml:id="id_16">
    <!-- Reference to the message passed as input during initiation -->
    <variable name="inputVariable" messageType="client:Update_Consumer_OH_BPELProcessRequestMessage" xml:id="id_17"/>

    <!-- Reference to the message that will be returned to the requester-->
    <variable name="outputVariable" messageType="client:Update_Consumer_OH_BPELProcessResponseMessage" xml:id="id_18"/>
    <variable name="Invoke_Upd_RA_SALESFORCE_REQ" messageType="ns2:Request_msg_out" xml:id="id_19"/>
    <variable name="Receive_Upd_RA_SALESFORCE_RSP" messageType="ns2:Reply_msg_in" xml:id="id_20"/>
    <variable name="JMSCorrelationId" type="xsd:string" xml:id="id_21"/>
    <variable name="runtimeFault" messageType="bpelx:RuntimeFaultMessage" xml:id="id_22"/>
    <variable name="Invoke_ErrorManager_handle_REQ" messageType="ns10:handle_Message_In" xml:id="id_23"/>
    <variable name="Invoke_ErrorManager_handle_RSP" messageType="ns10:handle_Message_Out" xml:id="id_24"/>
    <variable name="Response_Upd_Consumer_FRSP"
              messageType="client:Update_Consumer_OH_BPELProcessFaultMessage" xml:id="id_25"/>
    <variable name="Invoke_PublishResult_REQ" messageType="ns11:publishResult_Message_In" xml:id="id_26"/>
    <variable name="Invoke_PublishResult_RSP" messageType="ns11:publishResult_Message_Out" xml:id="id_27"/>
    <variable name="Result_Error" element="ns7:Result" xml:id="id_28"/>
    <variable name="existsError" type="xsd:boolean" xml:id="id_29">
      <from xml:id="id_30">false()</from>
    </variable>
    <variable name="Invoke_updConversationStatus_REQ" messageType="ns11:updConversationStatus_Message_In"
              xml:id="id_31"/>
    <variable name="Invoke_updConversationStatus_RSP" messageType="ns11:updConversationStatus_Message_Out"
              xml:id="id_32"/>
    <variable name="Upd_Consumer_CRSP" element="ns6:Upd_Consumer_CRSP" xml:id="id_33"/>
  </variables>
  <correlationSets xml:id="id_34">
    <correlationSet name="Correlation_Set_HeaderConversation" properties="ns3:conversationId" xml:id="id_35"/>
  </correlationSets>
  <faultHandlers xml:id="id_36">
    <catchAll xml:id="id_37">
      <exit name="Fail_Terminate" xml:id="id_38"/>
    </catchAll>
  </faultHandlers>
  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ORCHESTRATION LOGIC                                               
     Set of activities coordinating the flow of messages across the    
     services integrated within this business process                  
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <sequence name="main" xml:id="id_39">

    <!-- Receive input from requestor. (Note: This maps to operation defined in Update_Consumer_OH_BPELProcess.wsdl) -->
    <scope name="Receive_Reply_Sync" xml:id="id_40">
      <faultHandlers xml:id="id_41">
        <catchAll xml:id="id_42"><sequence name="Sync_Reply_Failure_Sequence" xml:id="id_43">
            <assign name="Assign_ErrorManager_REQ" xml:id="id_44">
              <copy xml:id="id_45">
                <from xml:id="id_46">concat($inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@operation,'_',$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@name,'_OH_CHL')</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_47">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/@component</to>
              </copy>
              <copy xml:id="id_48">
                <from xml:id="id_49">ora:getFaultAsXML()</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_50">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:SourceFault</to>
              </copy>
              <copy xml:id="id_51">
                <from xml:id="id_52">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@name</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_53">$Invoke_ErrorManager_handle_REQ.In/ns8:ErrorIndex/@module</to>
              </copy>
              <copy xml:id="id_54">
                <from xml:id="id_55">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@operation</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_56">$Invoke_ErrorManager_handle_REQ.In/ns8:ErrorIndex/@subModule</to>
              </copy>
              <copy xml:id="id_57">
                <from xml:id="id_58">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@operation</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_59">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/@operation</to>
              </copy>
              <copy xml:id="id_60">
                <from xml:id="id_61">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_62">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns14:Header/ns4:Consumer</to>
              </copy>
              <copy xml:id="id_63">
                <from xml:id="id_64">$inputVariable.payload/ns4:RequestHeader/ns4:Trace</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_65">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns14:Header/ns4:Trace</to>
              </copy>
              <copy xml:id="id_66">
                <from xml:id="id_67">$inputVariable.payload/ns4:RequestHeader/ns4:Channel</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_68">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns14:Header/ns4:Channel</to>
              </copy>
              <copy xml:id="id_69">
                <from xml:id="id_70">'Update_Consumer_OH_BPELProcess'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_71">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:ErrorSourceDetails/@details</to>
              </copy>
              <copy xml:id="id_72">
                <from xml:id="id_73">'FRW'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_74">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:ErrorSourceDetails/@source</to>
              </copy>
              <copy xml:id="id_75">
                <from xml:id="id_76">xp20:current-dateTime()</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_77">$Invoke_ErrorManager_handle_REQ.In/ns12:ErrorPlaceHolder/@time</to>
              </copy>
              <copy xml:id="id_78">
                <from xml:id="id_79">concat (ora:getCompositeName(), '/',  ora:getProcessId(), '/', 'Receive_Reply_Sync')</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_80">$Invoke_ErrorManager_handle_REQ.In/ns12:ErrorPlaceHolder/@place</to>
              </copy>
            </assign>
            <invoke name="Invoke_ReceiveReplySync_ErrorManager" partnerLink="DReference_ErrorManager"
                    portType="ns10:ErrorManager_PortType" operation="handle"
                    inputVariable="Invoke_ErrorManager_handle_REQ"
                    outputVariable="Invoke_ErrorManager_handle_RSP" bpelx:invokeAsDetail="no" xml:id="id_81"/>
            <assign name="Assign_Fail_Output" validate="yes" xml:id="id_82">
              <copy xml:id="id_83">
                <from xml:id="id_84">$Invoke_ErrorManager_handle_RSP.Out/ns7:Result</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_85">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns7:Result</to>
              </copy>
              <copy xml:id="id_86">
                <from xml:id="id_87">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_88">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Consumer</to>
              </copy>
              <copy xml:id="id_89">
                <from xml:id="id_90">$inputVariable.payload/ns4:RequestHeader/ns4:Trace</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_91">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Trace</to>
              </copy>
              <copy xml:id="id_92">
                <from xml:id="id_93">$inputVariable.payload/ns4:RequestHeader/ns4:Channel</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_94">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Channel</to>
              </copy>
            </assign>
            <reply name="Reply_Failure" partnerLink="update_consumer_oh_bpelprocess_client"
                   variable="Response_Upd_Consumer_FRSP" portType="client:Update_Consumer_OH_BPELProcess"
                   operation="process" faultName="client:processFault" xml:id="id_95"/>
            <exit name="Finish_Sync" xml:id="id_96"/>
          </sequence></catchAll>
      </faultHandlers>
      <sequence name="Receive_Reply_Sync_Sequence" xml:id="id_97">
        <receive name="receiveInput" partnerLink="update_consumer_oh_bpelprocess_client"
                 portType="client:Update_Consumer_OH_BPELProcess" operation="process" variable="inputVariable"
                 createInstance="yes" xml:id="id_98">
          <correlations xml:id="id_99">
            <correlation set="Correlation_Set_HeaderConversation" initiate="yes" xml:id="id_100"/>
          </correlations>
        </receive>
        <validate name="Validate_Input" variables="inputVariable" xml:id="id_101"/>
        <assign name="get_Update_Consumer_OH_ReplyOk" validate="yes" xml:id="id_102">
          <bpelx:annotation xml:id="id_103">
            <bpelx:pattern patternName="bpelx:transformation" xml:id="id_104"></bpelx:pattern>
          </bpelx:annotation>
          <copy xml:id="id_105">
            <from xml:id="id_106">ora:doXSLTransformForDoc("../Transformations/get_Update_Consumer_OH_ReplyOK.xsl", $inputVariable.payload)</from>
            <to variable="outputVariable" part="payload" xml:id="id_107"/>
          </copy>
        </assign>
        <reply name="replyOutput" partnerLink="update_consumer_oh_bpelprocess_client"
               portType="client:Update_Consumer_OH_BPELProcess" operation="process" variable="outputVariable"
               xml:id="id_108"/>
      </sequence>
    </scope>
    <scope name="Invoke_Reply_RA_Async" xml:id="id_109">
      <faultHandlers xml:id="id_110">
        <catchAll xml:id="id_111"><assign name="Assign_Fault" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                                          xml:id="id_112">
            <copy xml:id="id_113">
              <from xml:id="id_114">true()</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_115">$existsError</to>
            </copy>
            <copy xml:id="id_116">
              <from xml:id="id_117">substring-before(substring-after(ora:getFaultAsString(),'&lt;summary&gt;'),'&lt;/summary&gt;')</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_118">$runtimeFault.summary</to>
            </copy>
            <copy xml:id="id_119">
              <from xml:id="id_120">substring-before(substring-after(ora:getFaultAsString(),'&lt;code&gt;'),'&lt;/code&gt;')</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_121">$runtimeFault.code</to>
            </copy>
            <copy xml:id="id_122">
              <from xml:id="id_123">substring-before(substring-after(ora:getFaultAsString(),'detail=&lt;detail&gt;'),'&lt;/detail&gt;')</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_124">$runtimeFault.detail</to>
            </copy>
          </assign></catchAll>
      </faultHandlers>
      <sequence name="Invoke_Reply_RA_Async_Sequence" xml:id="id_125">
        <assign name="Assigns" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xml:id="id_126">
          <copy xml:id="id_127">
            <from xml:id="id_128">ora:getInstanceId()</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_129">$JMSCorrelationId</to>
          </copy>
        </assign>
        <assign name="get_Upd_RA_SALESFORCE_REQ_v1" validate="yes" xml:id="id_130">
          <bpelx:annotation xml:id="id_131">
            <bpelx:pattern patternName="bpelx:transformation" xml:id="id_132"></bpelx:pattern>
          </bpelx:annotation>
          <copy xml:id="id_133">
            <from xml:id="id_134">ora:doXSLTransformForDoc("../Transformations/get_Upd_RA_SALESFORCE_REQ_v1.xsl", $inputVariable.payload)</from>
            <to variable="Invoke_Upd_RA_SALESFORCE_REQ" part="CHL-SALESFORCE-CRM_UPD-CLI-DATA_REQ" xml:id="id_135"/>
          </copy>
        </assign>
        <invoke name="Invoke_Upd_RA_SALESFORCE" partnerLink="jmsReference_Upd_RA_SALESFORCE" portType="ns2:Request_ptt"
                operation="Request" inputVariable="Invoke_Upd_RA_SALESFORCE_REQ"
                xml:id="id_136" bpelx:invokeAsDetail="no">
          <bpelx:toProperties xml:id="id_137">
            <bpelx:toProperty name="jca.jms.JMSType" xml:id="id_354">'Update_Consumer_OH_CHL'</bpelx:toProperty>
          </bpelx:toProperties>
        </invoke>
        <receive name="Receive_Upd_RA_SALESFORCE" partnerLink="jmsReference_Upd_RA_SALESFORCE" portType="ns2:Reply_ptt"
                 operation="Reply" variable="Receive_Upd_RA_SALESFORCE_RSP" xml:id="id_141"/>
      </sequence>
    </scope>
    <!-- Generate reply to synchronous request -->
    <scope name="Response_Evaluation" xml:id="id_144">
      <sequence name="Sequence5" xml:id="id_145">
        <if name="If_Previous_Fault_or_Exists_Result_Error" xml:id="id_146">
          <documentation xml:id="id_147">
            <![CDATA[Previous Runtime Fault]]>
          </documentation>
          <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_148">$existsError</condition>
          <sequence name="Sequence6" xml:id="id_149">
            <assign name="Assign_ErrorManager_REQ" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                    xml:id="id_150">
              <copy xml:id="id_151">
                <from xml:id="id_152">concat($inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@operation,'_',$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@name,'_OH_CHL')</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_153">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/@component</to>
              </copy>
              <copy xml:id="id_154">
                <from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_155">$runtimeFault.summary</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_156">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:SourceFault</to>
              </copy>
              <copy xml:id="id_157">
                <from xml:id="id_158">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@name</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_159">$Invoke_ErrorManager_handle_REQ.In/ns8:ErrorIndex/@module</to>
              </copy>
              <copy xml:id="id_160">
                <from xml:id="id_161">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@operation</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_162">$Invoke_ErrorManager_handle_REQ.In/ns8:ErrorIndex/@subModule</to>
              </copy>
              <copy xml:id="id_163">
                <from xml:id="id_164">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/ns4:Service/@operation</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_165">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/@operation</to>
              </copy>
              <copy xml:id="id_166">
                <from xml:id="id_167">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_168">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns14:Header/ns4:Consumer</to>
              </copy>
              <copy xml:id="id_169">
                <from xml:id="id_170">$inputVariable.payload/ns4:RequestHeader/ns4:Trace</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_171">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns14:Header/ns4:Trace</to>
              </copy>
              <copy xml:id="id_172">
                <from xml:id="id_173">$inputVariable.payload/ns4:RequestHeader/ns4:Channel</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_174">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns14:Header/ns4:Channel</to>
              </copy>
              <copy xml:id="id_175">
                <from xml:id="id_176">'Update_Consumer_OH_BPELProcess'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_177">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:ErrorSourceDetails/@details</to>
              </copy>
              <copy xml:id="id_178">
                <from xml:id="id_179">'FRW'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_180">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:ErrorSourceDetails/@source</to>
              </copy>
              <copy xml:id="id_181">
                <from xml:id="id_182">xp20:current-dateTime()</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_183">$Invoke_ErrorManager_handle_REQ.In/ns12:ErrorPlaceHolder/@time</to>
              </copy>
              <copy xml:id="id_184">
                <from xml:id="id_185">concat (ora:getCompositeName(), '/',  ora:getProcessId(), '/', 'Invoke_Reply_RA_Async')</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_186">$Invoke_ErrorManager_handle_REQ.In/ns12:ErrorPlaceHolder/@place</to>
              </copy>
            </assign>
            <invoke name="Invoke_ErrorManager" partnerLink="DReference_ErrorManager"
                    portType="ns10:ErrorManager_PortType" operation="handle"
                    inputVariable="Invoke_ErrorManager_handle_REQ" outputVariable="Invoke_ErrorManager_handle_RSP"
                    bpelx:invokeAsDetail="no" xml:id="id_187"/>
            <assign name="assign_CreateResponse" validate="yes" xml:id="id_188">
              <copy xml:id="id_189">
                <from xml:id="id_190">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_191">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Consumer</to>
              </copy>
              <copy xml:id="id_192">
                <from xml:id="id_193">$inputVariable.payload/ns4:RequestHeader/ns4:Trace</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_194">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Trace</to>
              </copy>
              <copy xml:id="id_195">
                <from xml:id="id_196">$inputVariable.payload/ns4:RequestHeader/ns4:Channel</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_197">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Channel</to>
              </copy>
              <copy xml:id="id_198">
                <from xml:id="id_199">$Invoke_ErrorManager_handle_RSP.Out/ns7:Result</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_200">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns7:Result</to>
              </copy>
            </assign>
          </sequence>
          <elseif xml:id="id_201">
            <documentation xml:id="id_202">
              <![CDATA[Result Status Error]]>
            </documentation>
            <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_203">$Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP/ns4:RequestHeader/ns7:Result/@status = 'ERROR'</condition>
            <sequence name="Sequence7" xml:id="id_204">
              <assign name="get_handleREQ" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                      xml:id="id_205">
                <bpelx:annotation xmlns:bpelx="http://schemas.oracle.com/bpel/extension" xml:id="id_206">
                  <bpelx:pattern patternName="bpelx:transformation" xml:id="id_207"></bpelx:pattern>
                </bpelx:annotation>
                <copy xml:id="id_208">
                  <from xml:id="id_209">ora:doXSLTransformForDoc("../Transformations/get_handleREQ_from_Receive_Upd_RA_SALESFORCE_RSP.xsl", $Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP)</from>
                  <to variable="Invoke_ErrorManager_handle_REQ" part="In" xml:id="id_210"/>
                </copy>
              </assign>
              <assign name="Assign_ErrorPlace" xml:id="id_211">
                <copy xml:id="id_212">
                  <from xml:id="id_213">concat (ora:getCompositeName(), '/',  ora:getProcessId(), '/', 'Reply_RA_Result_Error')</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_214">$Invoke_ErrorManager_handle_REQ.In/ns12:ErrorPlaceHolder/@place</to>
                </copy>
                <extensionAssignOperation xml:id="id_215">
                  <bpelx:append xml:id="id_216">
                    <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_217">$Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP</bpelx:from>
                    <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_218">$Invoke_ErrorManager_handle_REQ.In/ns14:ErrorTracer/ns8:SourceError/ns8:SourceFault</bpelx:to>
                  </bpelx:append>
                </extensionAssignOperation>
              </assign>
              <invoke name="Invoke_ErrorManager" partnerLink="DReference_ErrorManager"
                      portType="ns10:ErrorManager_PortType" operation="handle"
                      inputVariable="Invoke_ErrorManager_handle_REQ" outputVariable="Invoke_ErrorManager_handle_RSP"
                      bpelx:invokeAsDetail="no" xml:id="id_219"/><assign name="assign_CreateResponse"
                                                         xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                                                         validate="yes" xml:id="id_220">
                <copy xml:id="id_221">
                  <from xml:id="id_222">true()</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_223">$existsError</to>
                </copy>
                <copy xml:id="id_224">
                  <from xml:id="id_225">$Invoke_ErrorManager_handle_RSP.Out/ns7:Result</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_226">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns7:Result</to>
                </copy>
                <copy xml:id="id_227">
                  <from xml:id="id_228">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_229">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Consumer</to>
                </copy>
                <copy xml:id="id_230">
                  <from xml:id="id_231">$inputVariable.payload/ns4:RequestHeader/ns4:Trace</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_232">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Trace</to>
                </copy>
                <copy xml:id="id_233">
                  <from xml:id="id_234">$inputVariable.payload/ns4:RequestHeader/ns4:Channel</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_235">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Channel</to>
                </copy>
              </assign></sequence>
          </elseif>
          <else xml:id="id_236">
            <documentation xml:id="id_237">
              <![CDATA[Result Status Ok or Warning]]>
            </documentation>
            <sequence xml:id="id_238">
              <assign name="assign_CreateResponse" validate="yes" xml:id="id_239">
                <copy xml:id="id_240">
                  <from xml:id="id_241">$Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP/ns4:RequestHeader/ns4:Consumer</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_242">$Upd_Consumer_CRSP/ns4:ResponseHeader/ns4:Consumer</to>
                </copy>
                <copy xml:id="id_243">
                  <from xml:id="id_244">$Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP/ns4:RequestHeader/ns4:Trace</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_245">$Upd_Consumer_CRSP/ns4:ResponseHeader/ns4:Trace</to>
                </copy>
                <copy xml:id="id_246">
                  <from xml:id="id_247">$Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP/ns4:RequestHeader/ns4:Channel</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_248">$Upd_Consumer_CRSP/ns4:ResponseHeader/ns4:Channel</to>
                </copy>
                <copy xml:id="id_249">
                  <from xml:id="id_250">$Receive_Upd_RA_SALESFORCE_RSP.CHL-SALESFORCE-CRM_UPD-CLI-DATA_RSP/ns4:RequestHeader/ns7:Result</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_251">$Upd_Consumer_CRSP/ns4:ResponseHeader/ns7:Result</to>
                </copy>
              </assign>
            </sequence>
          </else>
        </if>
      </sequence>
    </scope>
    <scope name="Publish_Result" xml:id="id_252">
      <sequence name="Sequence4" xml:id="id_253">
        <if name="If_Error" xml:id="id_254">
          <documentation xml:id="id_255">
            <![CDATA[Publish Request With FRSP]]>
          </documentation>
          <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_256">$existsError</condition>
          <assign name="assign_CreatePublishREQ" validate="yes" xml:id="id_257">
            <copy xml:id="id_258">
              <from xml:id="id_259">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer/@sysCode</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_260">$Invoke_PublishResult_REQ.In/ns13:Consumer/@sysCode</to>
            </copy>
            <copy xml:id="id_261">
              <from xml:id="id_262">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer/@enterpriseCode</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_263">$Invoke_PublishResult_REQ.In/ns13:Consumer/@enterpriseCode</to>
            </copy>
            <copy xml:id="id_264">
              <from xml:id="id_265">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer/@countryCode</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_266">$Invoke_PublishResult_REQ.In/ns13:Consumer/@countryCode</to>
            </copy>
            <extensionAssignOperation xml:id="id_351">
              <bpelx:append xml:id="id_268">
                <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_269">$Response_Upd_Consumer_FRSP.FAULT_part</bpelx:from>
                <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_270">$Invoke_PublishResult_REQ.In/ns13:CallbackMessage</bpelx:to>
              </bpelx:append>
            </extensionAssignOperation>
          </assign>
          <else xml:id="id_271">
            <documentation xml:id="id_272">
              <![CDATA[Publish Request With Output]]>
            </documentation>
            <assign name="assign_CreatePublishREQ" validate="yes" xml:id="id_273">
              <copy xml:id="id_274">
                <from xml:id="id_275">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer/@enterpriseCode</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_276">$Invoke_PublishResult_REQ.In/ns13:Consumer/@enterpriseCode</to>
              </copy>
              <copy xml:id="id_277">
                <from xml:id="id_278">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer/@countryCode</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_279">$Invoke_PublishResult_REQ.In/ns13:Consumer/@countryCode</to>
              </copy>
              <extensionAssignOperation xml:id="id_353">
                <bpelx:append xml:id="id_281">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_282">$Upd_Consumer_CRSP</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_283">$Invoke_PublishResult_REQ.In/ns13:CallbackMessage</bpelx:to>
                </bpelx:append>
              </extensionAssignOperation>
              <copy xml:id="id_284">
                <from xml:id="id_285">$inputVariable.payload/ns4:RequestHeader/ns4:Consumer/@sysCode</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_286">$Invoke_PublishResult_REQ.In/ns13:Consumer/@sysCode</to>
              </copy>
            </assign>
          </else>
        </if>
        <invoke name="Invoke_PublishResult"
                inputVariable="Invoke_PublishResult_REQ" outputVariable="Invoke_PublishResult_RSP" partnerLink="DReference_SBConversationManager"
                portType="ns11:ConversationManager_PortType" operation="publishResult" bpelx:invokeAsDetail="no"
                xml:id="id_287"/>
        <if name="If_PublishError" xml:id="id_288">
          <documentation xml:id="id_289">
            <![CDATA[Publish Result@Status=Error]]>
          </documentation>
          <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_290">$Invoke_PublishResult_RSP.Out/ns7:Result/@status = 'ERROR'</condition>
          <throw name="Throw_RemoteFault" faultName="bpelx:remoteFault" faultVariable="runtimeFault" xml:id="id_291"/>
          <else xml:id="id_292">
            <documentation xml:id="id_293">
              <![CDATA[Continue]]>
            </documentation>
            <empty name="Empty" xml:id="id_294"/>
          </else>
        </if>
      </sequence>
    </scope>
    <scope name="Update_Status" xml:id="id_295">
      <sequence name="Sequence9" xml:id="id_296"><if name="If_Error" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                                                     xml:id="id_297">
      <documentation xml:id="id_298">
         <![CDATA[Publish Request With FRSP]]>
      </documentation>
      <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_299">$existsError</condition>
      
      <assign name="assign_UpdateConversationStatusREQ"
              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xml:id="id_300">
            <copy xml:id="id_301">
              <from xml:id="id_302">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/@conversationID</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_303">$Invoke_updConversationStatus_REQ.In/ns15:ConversationID</to>
            </copy>
            <copy xml:id="id_304">
              <from xml:id="id_305">'ERROR'</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_306">$Invoke_updConversationStatus_REQ.In/ns15:ConversationStatus/@status</to>
            </copy>
            <extensionAssignOperation xml:id="id_307">
              <bpelx:append xml:id="id_308">
                <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_309">$Response_Upd_Consumer_FRSP.FAULT_part</bpelx:from>
                <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_310">$Invoke_updConversationStatus_REQ.In/ns15:ConversationStatus/ns16:ReponseMessage</bpelx:to>
              </bpelx:append>
            </extensionAssignOperation>
            <copy xml:id="id_311">
              <from xml:id="id_312">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns7:Result</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_313">$Invoke_updConversationStatus_REQ.In/ns15:ConversationStatus/ns7:Result</to>
            </copy>
            <copy xml:id="id_314">
              <from xml:id="id_315">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Trace/ns4:Service/@name</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_316">$Invoke_updConversationStatus_REQ.In/ns15:SourceComponent/@component</to>
            </copy>
            <copy xml:id="id_317">
              <from xml:id="id_318">$Response_Upd_Consumer_FRSP.FAULT_part/ns4:ResponseHeader/ns4:Trace/ns4:Service/@operation</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_319">$Invoke_updConversationStatus_REQ.In/ns15:SourceComponent/@operation</to>
            </copy>
          </assign><else xml:id="id_320">
         <documentation xml:id="id_321">
            <![CDATA[Publish Request With Output]]>
         </documentation>
         
      <assign name="assign_UpdateConversationStatusREQ"
              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xml:id="id_322">
              <copy xml:id="id_323">
                <from xml:id="id_324">$inputVariable.payload/ns4:RequestHeader/ns4:Trace/@conversationID</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_325">$Invoke_updConversationStatus_REQ.In/ns15:ConversationID</to>
              </copy>
              <copy xml:id="id_326">
                <from xml:id="id_327">'OK'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_328">$Invoke_updConversationStatus_REQ.In/ns15:ConversationStatus/@status</to>
              </copy>
              <extensionAssignOperation xml:id="id_329">
                <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension" xml:id="id_330">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_331">$outputVariable.payload</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_332">$Invoke_updConversationStatus_REQ.In/ns15:ConversationStatus/ns16:ReponseMessage</bpelx:to>
                </bpelx:append>
              </extensionAssignOperation>
              <copy xml:id="id_333">
                <from xml:id="id_334">$outputVariable.payload/ns4:ResponseHeader/ns7:Result</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_335">$Invoke_updConversationStatus_REQ.In/ns15:ConversationStatus/ns7:Result</to>
              </copy>
              <copy xml:id="id_336">
                <from xml:id="id_337">$outputVariable.payload/ns4:ResponseHeader/ns4:Trace/ns4:Service/@operation</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_338">$Invoke_updConversationStatus_REQ.In/ns15:SourceComponent/@operation</to>
              </copy>
              <copy xml:id="id_339">
                <from xml:id="id_340">$outputVariable.payload/ns4:ResponseHeader/ns4:Trace/ns4:Service/@name</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_341">$Invoke_updConversationStatus_REQ.In/ns15:SourceComponent/@component</to>
              </copy>
            </assign></else>
   </if>
        <invoke name="Invoke_UpdConversationStatus" partnerLink="DReference_SBConversationManager"
                portType="ns11:ConversationManager_PortType" operation="updConversationStatus"
                inputVariable="Invoke_updConversationStatus_REQ" outputVariable="Invoke_updConversationStatus_RSP"
                bpelx:invokeAsDetail="no" xml:id="id_342"/><if name="If_UpdateError"
                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                                                               xml:id="id_343">
      <documentation xml:id="id_344">
         
      <![CDATA[Publish Result@Status=Error]]></documentation>
      <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" xml:id="id_345">$Invoke_updConversationStatus_RSP.Out/ns7:Result/@status='ERROR'</condition>
      <throw name="Throw_RemoteFault" faultName="bpelx:remoteFault" faultVariable="runtimeFault" xml:id="id_346"/>
      <else xml:id="id_347">
         <documentation xml:id="id_348">
            <![CDATA[Continue]]>
         </documentation>
         <empty name="Empty" xml:id="id_349"/>
      </else>
   </if></sequence>
    </scope>
  </sequence>
</process>